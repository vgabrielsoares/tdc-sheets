<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.23.xsd">

    <!-- ========================================== -->
    <!-- CARGA DE DADOS BASE E FAKE - TDC SHEETS   -->
    <!-- ========================================== -->
    <!--
        Este changelog contém:
        - Dados base do RPG (contexto: base-data) - Para todos os ambientes
        - Dados fake de desenvolvimento (contexto: fake-data) - Apenas para dev
    -->
    
    <!-- 1.1 Dados Fundamentais -->
    
    <changeSet id="data-base-001" author="Victor Gabriel" context="base-data">
        <comment>Carrega dados base de arquetipos</comment>
        <loadData file="base-data/csv/arquetipos.csv" tableName="arquetipo" separator=";">
            <column name="id" type="NUMERIC"/>
            <column name="nome" type="STRING"/>
            <column name="pv_inicial" type="NUMERIC"/>
            <column name="pp_inicial" type="NUMERIC"/>
            <column name="pv_nivel" type="NUMERIC"/>
            <column name="pp_nivel" type="NUMERIC"/>
            <column name="defesa_5" type="NUMERIC"/>
            <column name="defesa_10" type="NUMERIC"/>
            <column name="defesa_15" type="NUMERIC"/>
        </loadData>
        <rollback>
            <delete tableName="arquetipo"/>
        </rollback>
    </changeSet>

    <changeSet id="data-base-001-5" author="Victor Gabriel" context="base-data">
        <comment>Carrega dados base de tamanhos</comment>
        <loadData file="base-data/csv/tamanhos.csv" tableName="tamanho" separator=";">
            <column name="id" type="NUMERIC"/>
            <column name="nome" type="STRING"/>
            <column name="defesa" type="NUMERIC"/>
            <column name="alcance" type="NUMERIC"/>
            <column name="peso_carregado" type="NUMERIC"/>
            <column name="quadrados" type="NUMERIC"/>
            <column name="dano" type="STRING"/>
            <column name="manobras" type="NUMERIC"/>
            <column name="nd_rastro" type="NUMERIC"/>
            <column name="acrobacia" type="NUMERIC"/>
            <column name="atletismo" type="NUMERIC"/>
            <column name="furtividade" type="NUMERIC"/>
            <column name="reflexos" type="NUMERIC"/>
            <column name="tenacidade" type="NUMERIC"/>
        </loadData>
        <rollback>
            <delete tableName="tamanho"/>
        </rollback>
    </changeSet>

    <changeSet id="data-base-002" author="Victor Gabriel" context="base-data">
        <comment>Carrega dados base de linhagens</comment>
        <loadData file="base-data/csv/linhagens.csv" tableName="linhagem" separator=";">
            <column name="id" type="NUMERIC"/>
            <column name="nome" type="STRING"/>
            <column name="tamanho" type="STRING"/>
            <column name="altura_media" type="STRING"/>
            <column name="peso_medio" type="STRING"/>
            <column name="maioridade" type="STRING"/>
            <column name="expectativa_vida" type="STRING"/>
            <column name="descricao" type="STRING"/>
        </loadData>
        <rollback>
            <delete tableName="linhagem"/>
        </rollback>
    </changeSet>

    <changeSet id="data-base-003" author="Victor Gabriel" context="base-data">
        <comment>Carrega dados base de origens</comment>
        <loadData file="base-data/csv/origens.csv" tableName="origem" separator=";">
            <column name="id" type="NUMERIC"/>
            <column name="nome" type="STRING"/>
            <column name="descricao" type="STRING"/>
            <column name="habilidade_especial" type="STRING"/>
        </loadData>
    </changeSet>

    <changeSet id="data-base-004" author="Victor Gabriel" context="base-data">
        <comment>Carrega dados base de habilidades</comment>
        <loadData file="base-data/csv/habilidades.csv" tableName="habilidade" separator=";">
            <column name="id" type="NUMERIC"/>
            <column name="pericia" type="STRING"/>
            <column name="descricao" type="STRING"/>
            <column name="atributo_chave" type="STRING"/>
            <column name="penalidade_carga" type="BOOLEAN"/>
            <column name="instrumento" type="BOOLEAN"/>
            <column name="proficiencia" type="BOOLEAN"/>
            <column name="combate" type="BOOLEAN"/>
        </loadData>
    </changeSet>

    <!-- TODO: Implementar carga de dados de feitiços posteriormente -->
    <!-- 
    <changeSet id="data-base-005" author="Victor Gabriel" context="base-data">
        <comment>Carrega dados base de feitiços (PENDENTE)</comment>
        Será implementado posteriormente quando resolvidos os problemas de valores NULL em campos ENUM
    </changeSet>
    -->

    <changeSet author="Victor Gabriel" id="fix-particularidade-pontos-column" context="base-data">
        <comment>Altera coluna pontos da tabela particularidade para VARCHAR</comment>
        <modifyDataType tableName="particularidade" columnName="pontos" newDataType="VARCHAR(255)"/>
        <rollback>
            <modifyDataType tableName="particularidade" columnName="pontos" newDataType="INTEGER"/>
        </rollback>
    </changeSet>

    <changeSet id="data-base-006" author="Victor Gabriel" context="base-data">
        <comment>Carrega dados base de particularidades</comment>
        <loadData file="base-data/csv/particularidades.csv" tableName="particularidade" separator=";">
            <column name="id" type="NUMERIC"/>
            <column name="particularidade" type="STRING"/>
            <column name="efeito" type="STRING"/>
            <column name="pontos" type="STRING"/>
        </loadData>
        <rollback>
            <delete tableName="particularidade"/>
        </rollback>
    </changeSet>

    <!-- 1.2 Classes e Requisitos -->
    
    <changeSet id="data-base-007" author="Victor Gabriel" context="base-data">
        <comment>Carrega requisitos de classes</comment>
        <loadData file="base-data/csv/requisitos_classe.csv" tableName="requisitos_classe" separator=";">
            <column name="id" type="NUMERIC"/>
            <column name="classe_id" type="NUMERIC"/>
            <column name="nivel_minimo" type="NUMERIC"/>
            <column name="primeiro_arquetipo" type="STRING"/>
            <column name="segundo_arquetipo" type="STRING"/>
            <column name="primeiro_arquetipo_nivel" type="NUMERIC"/>
            <column name="segundo_arquetipo_nivel" type="NUMERIC"/>
        </loadData>
    </changeSet>

    <changeSet id="data-base-008" author="Victor Gabriel" context="base-data">
        <comment>Carrega dados base de classes</comment>
        <loadData file="base-data/csv/classes.csv" tableName="classe" separator=";">
            <column name="id" type="NUMERIC"/>
            <column name="nome" type="STRING"/>
            <column name="descricao" type="STRING"/>
            <column name="requisitos_classe_id" type="NUMERIC"/>
            <column name="defesa_5" type="NUMERIC"/>
            <column name="defesa_10" type="NUMERIC"/>
            <column name="defesa_15" type="NUMERIC"/>
        </loadData>
    </changeSet>

    <!-- 1.3 Equipamentos e Itens -->
    
    <changeSet id="data-base-009-v3" author="Victor Gabriel" context="base-data">
        <comment>Limpa dados existentes e carrega dados base de moedas e riquezas na tabela equipamentos</comment>
        <delete tableName="equipamentos"/>
        <loadData file="base-data/csv/moedas_riquezas.csv" tableName="equipamentos" separator=";">
            <column name="id" type="NUMERIC"/>
            <column name="nome" type="STRING"/>
            <column name="preco" type="STRING" header="valor_po"/>
            <column name="peso" type="NUMERIC"/>
            <column name="tipo" type="STRING"/>
            <column name="descricao" type="STRING"/>
            <column name="raridade" type="STRING"/>
        </loadData>
        <rollback>
            <delete tableName="equipamentos">
                <where>id BETWEEN 1 AND 100</where>
            </delete>
        </rollback>
    </changeSet>

    <changeSet id="data-base-010" author="Victor Gabriel" context="base-data">
        <comment>Carrega dados base de itens gerais na tabela equipamentos</comment>
        <loadData file="base-data/csv/itens_gerais.csv" tableName="equipamentos" separator=";">
            <column name="id" type="NUMERIC"/>
            <column name="nome" type="STRING"/>
            <column name="preco" type="STRING" header="valor_po"/>
            <column name="peso" type="NUMERIC"/>
            <column name="tipo" type="STRING" header="categoria"/>
            <column name="descricao" type="STRING"/>
            <column name="raridade" type="STRING"/>
        </loadData>
        <rollback>
            <delete tableName="equipamentos">
                <where>id BETWEEN 101 AND 200</where>
            </delete>
        </rollback>
    </changeSet>

    <changeSet id="data-base-011" author="Victor Gabriel" context="base-data">
        <comment>Carrega dados base de armas na tabela equipamentos</comment>
        <loadData file="base-data/csv/armas.csv" tableName="equipamentos" separator=";">
            <column name="id" type="NUMERIC"/>
            <column name="nome" type="STRING"/>
            <column name="preco" type="STRING" header="valor_po"/>
            <column name="peso" type="NUMERIC"/>
            <column name="tipo" type="STRING" header="categoria"/>
            <column name="descricao" type="STRING"/>
            <column name="raridade" type="STRING"/>
        </loadData>
        <rollback>
            <delete tableName="equipamentos">
                <where>id BETWEEN 201 AND 300</where>
            </delete>
        </rollback>
    </changeSet>

    <changeSet id="data-base-012" author="Victor Gabriel" context="base-data">
        <comment>Carrega dados base de armaduras na tabela equipamentos</comment>
        <loadData file="base-data/csv/armaduras.csv" tableName="equipamentos" separator=";">
            <column name="id" type="NUMERIC"/>
            <column name="nome" type="STRING"/>
            <column name="preco" type="STRING" header="valor_po"/>
            <column name="peso" type="NUMERIC"/>
            <column name="tipo" type="STRING" header="categoria"/>
            <column name="descricao" type="STRING"/>
            <column name="raridade" type="STRING"/>
        </loadData>
        <rollback>
            <delete tableName="equipamentos">
                <where>id BETWEEN 301 AND 400</where>
            </delete>
        </rollback>
    </changeSet>

    <changeSet id="data-base-013" author="Victor Gabriel" context="base-data">
        <comment>Carrega dados base de itens mágicos na tabela equipamentos</comment>
        <loadData file="base-data/csv/itens_magicos.csv" tableName="equipamentos" separator=";">
            <column name="id" type="NUMERIC"/>
            <column name="nome" type="STRING"/>
            <column name="preco" type="STRING" header="valor_po"/>
            <column name="peso" type="NUMERIC"/>
            <column name="tipo" type="STRING"/>
            <column name="descricao" type="STRING" header="efeitos"/>
            <column name="raridade" type="STRING"/>
        </loadData>
        <rollback>
            <delete tableName="equipamentos">
                <where>id BETWEEN 401 AND 500</where>
            </delete>
        </rollback>
    </changeSet>

    <changeSet id="data-base-014" author="Victor Gabriel" context="base-data">
        <comment>Carrega dados base de materiais na tabela equipamentos</comment>
        <loadData file="base-data/csv/materiais.csv" tableName="equipamentos" separator=";">
            <column name="id" type="NUMERIC"/>
            <column name="nome" type="STRING"/>
            <column name="preco" type="STRING" header="valor_po"/>
            <column name="peso" type="NUMERIC"/>
            <column name="tipo" type="STRING" header="tipo_material"/>
            <column name="descricao" type="STRING" header="usos"/>
            <column name="raridade" type="STRING"/>
        </loadData>
        <rollback>
            <delete tableName="equipamentos">
                <where>id BETWEEN 501 AND 600</where>
            </delete>
        </rollback>
    </changeSet>

    <changeSet id="data-base-015" author="Victor Gabriel" context="base-data">
        <comment>Carrega dados base de veículos e montarias na tabela equipamentos</comment>
        <loadData file="base-data/csv/veiculos_montarias.csv" tableName="equipamentos" separator=";">
            <column name="id" type="NUMERIC"/>
            <column name="nome" type="STRING"/>
            <column name="preco" type="STRING" header="valor_po"/>
            <column name="peso" type="NUMERIC"/>
            <column name="tipo" type="STRING"/>
            <column name="descricao" type="STRING"/>
            <column name="raridade" type="STRING"/>
        </loadData>
        <rollback>
            <delete tableName="equipamentos">
                <where>id BETWEEN 601 AND 700</where>
            </delete>
        </rollback>
    </changeSet>

</databaseChangeLog>
